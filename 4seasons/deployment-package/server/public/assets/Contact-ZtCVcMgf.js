import{r as m,j as e,l as k,P as y,M as b,n as w,I as v,b as T,B as C}from"./index-CExeABXn.js";import{L as d,I as x}from"./label-B0wMjqP3.js";import{C as S,a as F}from"./card-Dhfs8BJI.js";import{M as E,C as M}from"./map-pin-C7237FvP.js";import{C as P}from"./clock-DzoDwMQQ.js";import{C as I}from"./circle-check-big-C-_Ln9RQ.js";const j=m.forwardRef(({className:a,...t},s)=>e.jsx("textarea",{className:k("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...t}));j.displayName="Textarea";class l{constructor(){this.token=null,this.headerName="x-csrf-token",this.cookieName="csrf-token",this.token=this.getTokenFromCookie()}static getInstance(){return l.instance||(l.instance=new l),l.instance}getTokenFromCookie(){const t=document.cookie.split(";");for(const s of t){const[n,o]=s.trim().split("=");if(n===this.cookieName)return decodeURIComponent(o)}return null}async fetchToken(){try{const t=await fetch("/api/csrf-token",{method:"GET",credentials:"include"});if(!t.ok)throw new Error(`Failed to fetch CSRF token: ${t.status}`);const s=await t.json();return this.token=s.csrfToken,this.headerName=s.headerName||this.headerName,this.cookieName=s.cookieName||this.cookieName,this.token}catch(t){throw console.error("Failed to fetch CSRF token:",t),t}}async getToken(){if(this.token||await this.fetchToken(),!this.token)throw new Error("CSRF token not available");return this.token}getTokenSync(){return this.token||this.getTokenFromCookie()}async addToHeaders(t={}){const s=await this.getToken();return{...t,[this.headerName]:s}}async addToFormData(t){const s=await this.getToken();return t.append("_csrf",s),t}async addToSearchParams(t){const s=await this.getToken();return t.append("_csrf",s),t}async secureFetch(t,s={}){const n=(s.method||"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(n))try{const r=await this.getToken();s.headers={...s.headers,[this.headerName]:r}}catch(r){console.warn("Could not add CSRF token to request:",r)}s.credentials=s.credentials||"include";const o=await fetch(t,s);if(o.status===403){const r=await o.clone().text();if(r.includes("CSRF")||r.includes("csrf"))try{return await this.fetchToken(),["POST","PUT","PATCH","DELETE"].includes(n)&&(s.headers={...s.headers,[this.headerName]:this.token}),fetch(t,s)}catch(u){console.error("Failed to retry request with new CSRF token:",u)}}return o}clearToken(){this.token=null,document.cookie=`${this.cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`}getHeaderName(){return this.headerName}hasValidToken(){return!!(this.token||this.getTokenFromCookie())}}const R=l.getInstance(),A=(a,t)=>R.secureFetch(a,t);function B(){const[a,t]=m.useState({fullName:"",email:"",phone:"",subject:"",message:""}),[s,n]=m.useState(!1),[o,r]=m.useState("idle"),[u,f]=m.useState(""),i=p=>{const{id:c,value:h}=p.target;t(g=>({...g,[c]:h}))},N=async p=>{p.preventDefault(),n(!0),r("idle");try{const c=await A("/api/forms/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.fullName,email:a.email,phone:a.phone,message:a.message,subject:a.subject,propertyInterest:a.subject,honeypot:""})}),h=await c.json();c.ok?(r("success"),f(h.message),t({fullName:"",email:"",phone:"",subject:"",message:""})):(r("error"),f(h.error||"Failed to submit form"))}catch{r("error"),f("Network error. Please try again.")}finally{n(!1)}};return e.jsx("section",{id:"contact",className:"py-20 bg-slate-100",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-4",children:"Contact Us"}),e.jsx("p",{className:"text-xl text-slate-600",children:"4Seasons Real Estate is here to help you with all your real estate needs. Reach out to us through any of the channels below or fill out the contact form."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Office Locations"}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(E,{className:"w-6 h-6 mt-1 flex-shrink-0",style:{color:"#0d0d33"}}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:"Allen Texas"}),e.jsx("p",{className:"text-slate-600",children:"1333 W. McDermott Dr #200, Allen, TX, 75013"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(y,{className:"w-6 h-6 flex-shrink-0",style:{color:"#0d0d33"}}),e.jsx("a",{href:"tel:2742743873",className:"text-slate-600 hover:text-primary transition-colors",children:"(214) 274-3873"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(b,{className:"w-6 h-6 flex-shrink-0",style:{color:"#0d0d33"}}),e.jsx("a",{href:"mailto:info@4seasonsrealestate.com",className:"text-slate-600 hover:text-primary transition-colors",children:"info@4seasonsrealestate.com"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{className:"w-6 h-6 flex-shrink-0",style:{color:"#0d0d33"}}),e.jsx("span",{className:"text-slate-600",children:"Mon-Fri: 9AM-6PM, Sat: 10AM-4PM"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Follow Us"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("a",{href:"https://www.facebook.com/amysrealty/",target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 text-white rounded flex items-center justify-center hover:opacity-80 transition-opacity",style:{backgroundColor:"#1f2937"},"aria-label":"Facebook",children:e.jsx("span",{className:"font-bold text-sm",children:"f"})}),e.jsx("a",{href:"#",className:"w-8 h-8 text-white rounded flex items-center justify-center hover:opacity-80 transition-opacity",style:{backgroundColor:"#1f2937"},"aria-label":"Twitter",children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx("a",{href:"#",className:"w-8 h-8 text-white rounded flex items-center justify-center hover:opacity-80 transition-opacity",style:{backgroundColor:"#1f2937"},"aria-label":"Instagram",children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx("a",{href:"https://www.linkedin.com/in/amy-harwood-28209b179/",target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 text-white rounded flex items-center justify-center hover:opacity-80 transition-opacity",style:{backgroundColor:"#1f2937"},"aria-label":"LinkedIn",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx("a",{href:"mailto:info@4seasonsrealestate.com",className:"w-8 h-8 text-white rounded flex items-center justify-center hover:opacity-80 transition-opacity",style:{backgroundColor:"#1f2937"},"aria-label":"Email",children:e.jsx(b,{className:"w-4 h-4"})})]})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-8 text-center",children:e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-4",children:"Send Us a Message"})}),e.jsx(S,{className:"bg-white shadow-lg",children:e.jsxs(F,{className:"p-8",children:[o!=="idle"&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center space-x-3 ${o==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[o==="success"?e.jsx(I,{className:"w-5 h-5 text-green-600 flex-shrink-0"}):e.jsx(M,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:`text-sm ${o==="success"?"text-green-800":"text-red-800"}`,children:u})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"fullName",className:"text-sm font-medium text-slate-700 mb-2",children:"Full Name"}),e.jsx(x,{id:"fullName",type:"text",placeholder:"Your name",className:"w-full",value:a.fullName,onChange:i,required:!0,disabled:s})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"email",className:"text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),e.jsx(x,{id:"email",type:"email",placeholder:"Your email",className:"w-full",value:a.email,onChange:i,required:!0,disabled:s})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"phone",className:"text-sm font-medium text-slate-700 mb-2",children:"Phone Number"}),e.jsx(x,{id:"phone",type:"tel",placeholder:"Your phone",className:"w-full",value:a.phone,onChange:i,disabled:s})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject",className:"text-sm font-medium text-slate-700 mb-2",children:"Subject"}),e.jsx(x,{id:"subject",type:"text",placeholder:"Select a subject",className:"w-full",value:a.subject,onChange:i,disabled:s})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"message",className:"text-sm font-medium text-slate-700 mb-2",children:"Message"}),e.jsx(j,{id:"message",placeholder:"Your message...",rows:4,className:"w-full",value:a.message,onChange:i,required:!0,disabled:s})]}),e.jsx(C,{type:"submit",className:"w-full bg-[#0d0d33] text-white py-3 text-lg font-medium hover:!bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:s,children:s?"Sending...":"Submit Message"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-4",children:[e.jsx("strong",{children:"SMS Opt-in:"})," By submitting this form, you consent to receive SMS notifications from 4Seasons Real Estate regarding your inquiry. Standard message and data rates may apply. You can opt out at any time by replying STOP. Message frequency varies."]})]})]})})]})]})})})}export{B as C,j as T};
